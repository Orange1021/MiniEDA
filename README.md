# MiniEDA

ä¸€ä¸ªè½»é‡çº§çš„ EDAï¼ˆç”µå­è®¾è®¡è‡ªåŠ¨åŒ–ï¼‰å·¥å…·é“¾ï¼Œç”¨äºæ•°å­—ç”µè·¯çš„é™æ€æ—¶åºåˆ†æå’ŒèŠ¯ç‰‡å¸ƒå±€ä¼˜åŒ–ã€‚

## é¡¹ç›®ç®€ä»‹

MiniEDA æ˜¯ä¸€ä¸ªæ•™å­¦å’Œå®éªŒæ€§è´¨çš„ EDA å·¥å…·é“¾é¡¹ç›®ï¼Œæ—¨åœ¨å®ç°æ•°å­—é›†æˆç”µè·¯è®¾è®¡æµç¨‹ä¸­çš„å…³é”®åŠŸèƒ½ã€‚æœ¬é¡¹ç›®é‡‡ç”¨ C++17 å¼€å‘ï¼Œæä¾›æ¸…æ™°çš„ä»£ç ç»“æ„å’Œå·¥ä¸šçº§çš„ç¼–ç¨‹è§„èŒƒï¼Œé€‚åˆç”¨äºå­¦ä¹  EDA å·¥å…·å¼€å‘å’Œæ•°å­—ç”µè·¯è®¾è®¡ã€‚

## ä¸»è¦åŠŸèƒ½

### âœ… å·²å®ç°

- **Cell æ¨¡å—**ï¼šæ•°å­—ç”µè·¯é€»è¾‘å•å…ƒæ•°æ®æ¨¡å‹
  - æ”¯æŒåŸºæœ¬é€»è¾‘é—¨ï¼ˆAND, OR, NOT, NAND, NOR, XOR, XNOR, BUFï¼‰
  - æ”¯æŒæ—¶åºå…ƒä»¶ï¼ˆDFF è§¦å‘å™¨ï¼‰
  - æ”¯æŒç»„åˆé€»è¾‘ï¼ˆMUX å¤šè·¯é€‰æ‹©å™¨ï¼‰
  - I/O ç«¯å£ç®¡ç†
  - å¼•è„šæ–¹å‘å’Œæ—¶åºå‚æ•°

- **Net æ¨¡å—**ï¼šç”µè·¯è¿æ¥ï¼ˆçº¿ç½‘ï¼‰æ•°æ®æ¨¡å‹
  - é©±åŠ¨-è´Ÿè½½è¿æ¥ç®¡ç†
  - æ‰‡å‡ºè®¡ç®—
  - æ—¶åºå‚æ•°ï¼ˆçº¿ç½‘ç”µå®¹ã€çº¿å»¶è¿Ÿï¼‰
  - æ—¶é’Ÿä¿¡å·è¯†åˆ«

- **NetlistDB æ¨¡å—**ï¼šç½‘è¡¨æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ
  - Cell/Net/Pin å®¹å™¨ç®¡ç†
  - O(1) å¿«é€ŸæŸ¥æ‰¾ï¼ˆä½¿ç”¨å“ˆå¸Œè¡¨ï¼‰
  - æ‹“æ‰‘æŸ¥è¯¢ï¼ˆæ‰‡å…¥/æ‰‡å‡ºï¼‰
  - ç½‘è¡¨éªŒè¯ä¸ç»Ÿè®¡
  - 42 ä¸ªå…¬å…±æ¥å£æ–¹æ³•

- **VerilogParser æ¨¡å—**ï¼šé—¨çº§ Verilog ç½‘è¡¨è§£æå™¨
  - è¯æ³•åˆ†æï¼ˆæ”¯æŒæ³¨é‡Šç§»é™¤ï¼‰
  - è¯­æ³•åˆ†æï¼ˆmodule/port/wire/instanceï¼‰
  - æ”¯æŒ 15+ ç§é—¨ç±»å‹ï¼ˆAND, OR, NAND, NOR, XOR, DFF ç­‰ï¼‰
  - å®Œæ•´çš„é”™è¯¯æŠ¥å‘Šç³»ç»Ÿ
  - æˆåŠŸè§£æ ISCAS s27 æ ‡å‡†æµ‹è¯•ç”µè·¯

### ğŸš§ å¼€å‘ä¸­

- **MiniSTA**ï¼šé™æ€æ—¶åºåˆ†æå·¥å…·
- **MiniPlacement**ï¼šèŠ¯ç‰‡å¸ƒå±€ä¼˜åŒ–å·¥å…·

## é¡¹ç›®ç»“æ„

```
MiniEDA/
â”œâ”€â”€ lib/                    # æ ¸å¿ƒåº“
â”‚   â”œâ”€â”€ include/           # å¤´æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ cell.h         # é€»è¾‘å•å…ƒæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ net.h          # çº¿ç½‘æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ netlist_db.h   # ç½‘è¡¨æ•°æ®åº“ âœ…
â”‚   â”‚   â””â”€â”€ verilog_parser.h  # Verilog è§£æå™¨ âœ…
â”‚   â””â”€â”€ src/               # å®ç°æ–‡ä»¶
â”‚       â”œâ”€â”€ cell.cpp
â”‚       â”œâ”€â”€ net.cpp
â”‚       â”œâ”€â”€ netlist_db.cpp    # 464 è¡Œ
â”‚       â””â”€â”€ verilog_parser.cpp # 780 è¡Œ
â”œâ”€â”€ apps/                  # åº”ç”¨ç¨‹åº
â”‚   â”œâ”€â”€ mini_sta/         # é™æ€æ—¶åºåˆ†æå·¥å…·ï¼ˆå¾…å®ç°ï¼‰
â”‚   â””â”€â”€ mini_placement/   # å¸ƒå±€ä¼˜åŒ–å·¥å…·ï¼ˆå¾…å®ç°ï¼‰
â”œâ”€â”€ build/                # æ„å»ºè¾“å‡ºç›®å½•
â”‚   â”œâ”€â”€ bin/             # å¯æ‰§è¡Œæ–‡ä»¶
â”‚   â””â”€â”€ lib/             # ç›®æ ‡æ–‡ä»¶
â”œâ”€â”€ test_netlist_db.cpp   # NetlistDB æµ‹è¯•ç¨‹åº
â”œâ”€â”€ test_verilog_parser.cpp # VerilogParser æµ‹è¯•ç¨‹åº
â””â”€â”€ Makefile             # æ„å»ºé…ç½®
```

## ç¼–è¯‘ä¸å®‰è£…

### å‰ç½®è¦æ±‚

- C++17 å…¼å®¹çš„ç¼–è¯‘å™¨ï¼ˆæ¨è g++ 7.0 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰
- GNU Make

### ç¼–è¯‘æ­¥éª¤

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/Orange1021/MiniEDA.git
cd MiniEDA

# ç¼–è¯‘é¡¹ç›®
make

# æ¸…ç†æ„å»ºæ–‡ä»¶
make clean
```

ç¼–è¯‘æˆåŠŸåï¼Œå¯æ‰§è¡Œæ–‡ä»¶å°†ç”Ÿæˆåœ¨ `build/bin/` ç›®å½•ä¸‹ã€‚

## ä½¿ç”¨ç¤ºä¾‹

### NetlistDB æµ‹è¯•

```bash
# ç¼–è¯‘å¹¶è¿è¡Œ NetlistDB æµ‹è¯•
g++ -std=c++17 -I./lib/include test_netlist_db.cpp \
    build/lib/cell.o build/lib/net.o build/lib/netlist_db.o \
    -o build/bin/test_netlist_db

./build/bin/test_netlist_db
```

### VerilogParser æµ‹è¯•

```bash
# ç¼–è¯‘å¹¶è¿è¡Œ VerilogParser æµ‹è¯•
g++ -std=c++17 -I./lib/include test_verilog_parser.cpp \
    build/lib/cell.o build/lib/net.o build/lib/netlist_db.o \
    build/lib/verilog_parser.o \
    -o build/bin/test_verilog_parser

./build/bin/test_verilog_parser
```

## æµ‹è¯•åŸºå‡†

æœ¬é¡¹ç›®ä½¿ç”¨ ISCASï¼ˆInternational Symposium on Circuits and Systemsï¼‰æ ‡å‡†æµ‹è¯•é›†ã€‚

**æ³¨æ„**ï¼šæµ‹è¯•é›†æ–‡ä»¶è¾ƒå¤§ï¼ŒæœªåŒ…å«åœ¨ä»“åº“ä¸­ã€‚æ‚¨å¯ä»¥ä»ä»¥ä¸‹æ¥æºè·å–ï¼š
- [ISCAS Benchmarks](https://web.archive.org/web/20180320233052/http://www.pld.ttu.ee/~maksim/benchmarks/iscas85/verilog/)
- å°†æ–‡ä»¶æ”¾ç½®åœ¨ `benchmarks/ISCAS/Verilog/` ç›®å½•ä¸‹

## æŠ€æœ¯ç‰¹æ€§

- **ç¼–ç¨‹è¯­è¨€**ï¼šC++17
- **æ„å»ºç³»ç»Ÿ**ï¼šMakefile
- **ç¼–ç è§„èŒƒ**ï¼šéµå¾ªå·¥ä¸šæ ‡å‡†ï¼Œä½¿ç”¨å‘½åç©ºé—´ã€RAIIã€æ™ºèƒ½æŒ‡é’ˆç­‰ç°ä»£ C++ ç‰¹æ€§
- **æ•°æ®ç»“æ„**ï¼šé«˜æ•ˆçš„å›¾ç»“æ„è¡¨ç¤ºç”µè·¯æ‹“æ‰‘ï¼ŒO(1) æŸ¥æ‰¾
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¸…æ™°çš„å±‚æ¬¡ç»“æ„ï¼Œä¾¿äºæ‰©å±•å’Œç»´æŠ¤
- **å®Œæ•´æ³¨é‡Š**ï¼šæ‰€æœ‰ä»£ç é‡‡ç”¨è‹±æ–‡æ³¨é‡Šï¼Œç¬¦åˆå›½é™…è§„èŒƒ

## å¼€å‘è·¯çº¿

- [x] åŸºç¡€æ•°æ®æ¨¡å‹ï¼ˆCell, Pin, Netï¼‰
- [x] ç½‘è¡¨æ•°æ®åº“ç®¡ç†ï¼ˆNetlistDBï¼‰
- [x] Verilog é—¨çº§ç½‘è¡¨è§£æå™¨ï¼ˆVerilogParserï¼‰
- [ ] é™æ€æ—¶åºåˆ†æå¼•æ“ï¼ˆTimingEngineï¼‰
- [ ] å¸ƒå±€ç®—æ³•å®ç°ï¼ˆPlacementEngineï¼‰
- [ ] æ€§èƒ½ä¼˜åŒ–ä¸æµ‹è¯•

## ç»Ÿè®¡ä¿¡æ¯

| æ¨¡å— | ä»£ç è¡Œæ•° | åŠŸèƒ½ | çŠ¶æ€ |
|------|---------|------|------|
| Cell | 170 è¡Œ | é€»è¾‘å•å…ƒæ¨¡å‹ | âœ… å®Œæˆ |
| Net | 180 è¡Œ | çº¿ç½‘æ¨¡å‹ | âœ… å®Œæˆ |
| NetlistDB | 464 è¡Œ | æ•°æ®åº“ç®¡ç† | âœ… å®Œæˆ |
| VerilogParser | 780 è¡Œ | Verilog è§£æ | âœ… å®Œæˆ |
| TimingEngine | - | æ—¶åºåˆ†æ | ğŸš§ è®¡åˆ’ä¸­ |
| PlacementEngine | - | å¸ƒå±€ä¼˜åŒ– | ğŸš§ è®¡åˆ’ä¸­ |

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿é€šè¿‡ GitHub Issues è”ç³»ã€‚

---

**é¡¹ç›®è¿›åº¦**ï¼šæ ¸å¿ƒæ¨¡å—ï¼ˆNetlistDB + VerilogParserï¼‰å·²å®Œæˆï¼Œå¯è§£æçœŸå®ç”µè·¯ç½‘è¡¨å¹¶æ„å»ºæ•°æ®åº“ã€‚
